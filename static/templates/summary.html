<ul class="dropdown-content filter-ul" id="dropdown2">
    <li ng-repeat="filter in filts track by $index"><input checked="checked"
    checklist-model="foodgroup" checklist-value="filter['0']" class="filled-in"
    id="filled-in-box1{{$index}}" type="checkbox"> <label for=
    "filled-in-box1{{$index}}">{{filter['0']}}</label></li>
</ul>


<ul class="dropdown-content filter-ul" id="dropdown3">
    <li ng-repeat="filter in details.sortlist track by $index"><input class=
    "filled-in" id="filledin{{$index}}" name="sortradio" ng-click=
    "search(1, sortby)" ng-model="sortby" type="radio" value="{{filter}}">
    <label for="filledin{{$index}}">{{filter.split('_', 1)[0]}}</label></li>
</ul>


<section ng-controller='summaryCtrl'>
    <div class="row">
        <div class="col s8">
            <div class="card white">
                <div class="card-content">
                    <div class="row">
                        <div class="col s10 m10 push-s1 push-m1">
                            <div class="row center">
                                <div class="col s1">
                                    <span class=
                                    "card-title center-align date_change"><a ng-click="getNextDay(-1)">
                                    <i class=
                                    "fa fa-chevron-left cyan-text"></i></a></span>
                                </div>


                                <div class="col s10">
                                    <ul class="day-list center">
                                        <li><span class=
                                        "day_list center-align">{{navTitles.prev}}</span>
                                        </li>


                                        <li><span class=
                                        "day_list center-align"><i class=
                                        "cyan-text" style=
                                        "font-style:bold">{{navTitles.current}}</i></span>
                                        </li>


                                        <li><span class=
                                        "day_list center-align">{{navTitles.next}}</span>
                                        </li>
                                    </ul>
                                </div>


                                <div class="col s1">
                                    <span class=
                                    "card-title center-align date_change"><a ng-click="getNextDay(1)">
                                    <i class=
                                    "fa fa-chevron-right cyan-text"></i></a></span>
                                </div>
                            </div>
                        </div>


                        <div class="col s1 m1 shift_right">
                            <span class=
                            "card-title center-align meal-text date_change"><a ng-click="calendar()">
                            <i class="material-icons">date_range</i></a></span>
                        </div>            
                    </div>


<!--
                    <div class="row">
                        <div class="col s12 m12">
                            <span class="card-title center-align"></span> 
                            <h5 class="center-align"><span class=
                            "card-title center-align">{{plan_summary.dietplan.name}}</span>
                            </h5>
                        </div>
                    </div>
-->
                    <!--POPULATE DASHBOARD WITH RANDOM DATA-->


                    <div class="row">
                        
                        <div class="col s12 m12">
                            <h5 class="center-align">{{plan_summary.dietplan.name | limitTo:25 }}
                            </h5>
                        </div>
                        
                        <div class="col s12">
                            <div ng-repeat="(index1, meal) in plan_data">
                                <div class="row">
                                    <div class="col s1">
                                        <a class=
                                        "btn-floating btn-small waves-effect waves-light"
                                        id="add-meal-button" ng-click=
                                        "openCreatePlanModal(index1)"><i class=
                                        "material-icons add-button routine">add</i></a>
                                    </div>


                                    <div class="col s3">
                                        <p class="ing-text">{{meal.name}}</p>
                                    </div>


                                    <div class="col s1 pull-s1">
                                        <p class="cyan-text">{{meal.time}}</p>
                                    </div>
                                </div>

                                <div ng-if="meal.followingMealPlanRecipe != undefined && meal.followingMealPlanRecipe.length>0" >

                                <p class="ing-text meal_category" style="margin-left:11px !important">Recipes</b>

                                <br><br>
                                <div class="row">
                                        <div class="col s3 m5 center">
                                            <p class="meal-head">
                                            Name</p>
                                        </div>


                                        <div class="col s3 m1 push-m1">
                                           <p class="meal-head">Servings</p>
                                        </div>




                                        <div class="col s3 m1 push-m2">
                                            <p class="meal-head">Unit</p>
                                        </div>

                                    </div>

                                </div>
                                <br>
                                
                                <div class="meal_lst" ng-repeat=
                                '(index3, recipe) in meal.followingMealPlanRecipe track by $index'>
                                <div class="row">
                                        <div class="col s3 m5 push-m1">
                                            <p class="meal-text">
                                            {{recipe.meal_recipe.name}}</p>
                                        </div>


                                        <div class="col s3 m1 push-m1">
                                            <input class="serving" id=
                                            "dash_servings" min="0" ng-blur=
                                            "updateMealRecipe(recipe)"
                                            ng-model="recipe.no_of_servings"
                                            ng-pattern=
                                            "/^[0-9]+(\.[0-9]{1,2})?$/" step=
                                            "0.25" type="number">
                                        </div>


                                        <div class="col s2 m1 push-m2">
                                            <span class=
                                            "center-align"><input 
                                            checklist-model="checklistRecipes"
                                            checklist-value="recipe" class=
                                            "filled-in" id=
                                            "rec-filled-in-box-{{index1}}-{{index3}}"
                                            ng-change=
                                            "updateMealRecipe(recipe)"
                                            type="checkbox"> <label class=
                                            "ing-text highlight" for=
                                            "rec-filled-in-box-{{index1}}-{{index3}}"
                                            id="check-label"></label></span>
                                        </div>


                                        <div class="col m1 push-m3 bin">
                                            <span class=
                                            "card-title center-align"><a ng-click="removeRecipeFromSavedMeal(index1,index3)">
                                            <i class=
                                            "material-icons createbin">delete</i></a></span>
                                        </div>
                                    </div>
                                </div>

                                <div ng-if="meal.followingMealPlanIngredient != undefined && meal.followingMealPlanIngredient.length>0" >

                                <p class="ing-text meal_category" style="margin-left:16px !important">Ingredients</p><br>
                                <div class="row">
                                        <div class="col s3 m4 center">
                                             <p class="meal-head">Name</p>
                                        </div>


                                        <div class="col s3 m1">
                                           <p class="meal-head">Quantity</p>
                                        </div>


                                        <div class="col s3 m1 push-m1">
                                            <p>
                                             <p class="meal-head">Weight</p></p>
                                        </div>


                                        <div class="col s3 m2 push-m2 center">
                                            <p class="meal-head center">Unit</b>
                                        </div>

                                    </div>

                                </div>
                                <br>
                                <div class="meal_lst" ng-repeat=
                                '(index2, ingredient) in meal.followingMealPlanIngredient track by $index'>
                                <div class="row">
                                        <div class="col s3 m4">
                                            <p class="meal-text">
                                            {{ingredient.meal_ingredient.name}}</p>
                                        </div>


                                        <div class="col s3 m1">
                                            <input class="serving" id=
                                            "dash_servings" min="0" ng-blur=
                                            "updateMealIngredientQuantity(ingredient)"
                                            ng-model="ingredient.quantity"
                                            ng-pattern=
                                            "/^[0-9]+(\.[0-9]{1,2})?$/" step=
                                            "0.25" type="number">
                                        </div>


                                        <div class="col s3 m1 push-m1">
                                            <p class="meal-text">
                                            {{(ingredient.unit_desc.weight |
                                            number) * (ingredient.quantity) +
                                            '&nbsp;' + 'gms'}}</p>
                                        </div>


                                        <div class="col s3 m1 push-m2 selcol">
                                            <select id="ing_select"
                                            material-select="" ng-change=
                                            "updateMealIngredientMeasure(ingredient)"
                                            ng-model="ingredient.unit_desc"
                                            ng-options=
                                            "unit_desc as unit_desc.description for unit_desc in ingredient.meal_ingredient.measure track by unit_desc.id">
                                            </select>
                                        </div>


                                        <div class="col s3 m1 push-m3">
<!--
=======
                                        <div class="col s2 m1">
>>>>>>> ui_fixes
-->
                                            <span class=
                                            "center-align"><input 
                                            checklist-model="checklistIngredients"
                                            checklist-value="ingredient" class=
                                            "filled-in" id=
                                            "filled-in-box-{{index1}}-{{index2}}"
                                            ng-change=
                                            "updateMealIngredientCheck(ingredient)"
                                            type="checkbox"> <label class=
                                            "ing-text highlight selcheck" for=
                                            "filled-in-box-{{index1}}-{{index2}}"
                                            id="check-label"></label></span>
                                        </div>


                                        <div class="col m1 push-m2 ing_bin">
                                            <span class=
                                            "card-title center-align"><a ng-click="removeIngredientsFromSavedMeal(index1,index2)">
                                            <i class=
                                            "material-icons createbin">delete</i></a></span>
                                        </div>
                                    </div>
                                </div>

                                
                                
                            </div>
                        </div>

                        <div class="col s12 m12">
                        <div class="col s1">
                                        <a class=
                                        "btn-floating btn-small waves-effect waves-light"
                                        id="add-meal-button" ng-click=
                                        "addMealModal()"><i class=
                                        "material-icons add-button routine">add</i></a>
                                    </div>


                                    <div class="col s3">
                                        <p class="ing-text">Add new meal</p>
                                    </div>
                            

                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="col s4">
            <div class="row">
                <div class="col s12 m12">
                    <div class="card dash_graphcard">
                        <div class="card-content black-text">
                            <p class="ing-text">Total Calories</p>


                            <div class="progress progress-spacing">
                                <div class="determinate" ng-style=
                                "{width: percentNutrientChecked('energy_kcal')}">

                                </div>
                            </div>


                            <p class="meal-text">
                            {{calcDayNutrientVal('energy_kcal') | number:0}} Kcal</p>
                            <br>
                            <!-- ROUND PROGRESSBARS -->


                            <div clas="row">
                                <div class="col s4 m12 center">
                                    <div class="progress-wrapper">
            
                                        <div animation="easeInOutQuart"
                                        animation-delay="0" bgcolor="#EAEAEA"
                                        clockwise="true" color="#6639B6" 
                                        current="percentNutrientChecked('protein_tot')"
                                        duration="800" max="100" radius="50"
                                        responsive="false" round-progress=""
                                        rounded="true" semi="false" stroke="4">
                                        </div>


                                        <p class="center graph-text">PROTEINS</p>


                                        <p class="center graph-value">
                                            {{percentNutrientChecked('protein_tot') | number:0}} % </p>

                                        <p class="ing-text nutgraph_val">
                                        {{calcCheckedNutrientVal('protein_tot') | number:0}} g / {{calcDayNutrientVal('protein_tot') |
                                        number:0}} g</p>
                                    </div>
                                </div>


                                <div class="col s4 m12 center">
                                    <div animation="easeInOutQuart"
                                    animation-delay="0" bgcolor="#EAEAEA"
                                    clockwise="true" color="#FE6433" current=
                                    "percentNutrientChecked('carbohydrate_tot')"
                                    duration="800" max="100" radius="50"
                                    responsive="false" round-progress=""
                                    rounded="true" semi="false" stroke="4">
                                    </div>


                                    <p class="center graph-text">CARBS</p>


                                    <p class="center graph-value">
                                   {{percentNutrientChecked('carbohydrate_tot') | number:0}} %
                                    </p>


                                    <p class="ing-text nutgraph_val">
                                    {{calcCheckedNutrientVal('carbohydrate_tot') | number:0}} g / {{calcDayNutrientVal('carbohydrate_tot') |
                                    number:0}} g</p>
                                </div>


                                <div class="col s4 m12 center">
                                    <div animation="easeInOutQuart"
                                    animation-delay="0" bgcolor="#EAEAEA"
                                    clockwise="true" color="#FDC106" current=
                                    "percentNutrientChecked('fat_tot')"
                                    duration="800" max="100" radius="50"
                                    responsive="false" round-progress=""
                                    rounded="true" semi="false" stroke="4">
                                    </div>


                                    <p class="center graph-text">FATS</p>


                                    <p class="center graph-value">
                                    {{percentNutrientChecked('fat_tot') | number:0}} %
                                    </p>


                                    <p class="ing-text nutgraph_val">
                                    {{calcCheckedNutrientVal('fat_tot') | number:0}} g / {{calcDayNutrientVal('fat_tot') | number:0}}
                                    g</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Add Meal Modal-->


    <div class="modal modal-fixed-footer" id="add-meal-modal">
        <div class="modal-content">
            <div class="row">
                <div class="input-field col s12">
                    <input class="validate" id="meal_name" ng-model="meal.name"
                    type="text"> <label for="meal_name">Meal name</label>
                </div>
            </div>


            <div class="row">
                <p>Meal Time</p>
                <input id="exampleInput" name="input" ng-model=
                        "meal.time" placeholder="HH:mm:ss" required="" type=
                        "time">
                
            </div>


            <div class="row">
                <div class="col s12">
                    <div class="center-btn">
                        <a class="waves-effect waves-light btn largebtn"
                        ng-click="addMeal(meal)">CREATE A MEAL</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ADD FOOD MODAL -->


    <div class="modal" id="add-food-modal">
        <a class=
        "modal-action modal-close waves-effect waves-green btn-flat right">X</a>

        <div class="modal-content">
            <div class="row">
                <div class="col m8 push-m2">
                    <div class="row">
                        <div ng-class=
                        "{'col s1 m1': filts!==undefined&&filts.length&gt;0}"
                        ng-show="filts !==undefined && filts.length&gt;0">
                            <button class='fa fa-filter search-filter'
                            data-activates='dropdown2' data-beloworigin="true"
                            dropdown-button=""></button>
                        </div>


                        <div ng-class=
                        "{'col s1 m1': filts!==undefined && filts.length&gt;0}"
                        ng-show="filts !==undefined && filts.length&gt;0">
                            <button class='fa fa-reorder search-filter'
                            data-activates='dropdown3' data-beloworigin="true"
                            dropdown-button=""></button>
                        </div>


                        <div ng-class=
                        "{'col s10 m10': filts!==undefined&&filts.length&gt;0&&details.sortlist.length&gt;0, 'col s12 m12':filts===undefined || filts.length&lt;=0}">
                        <div class="card white create-search-box" id=
                        "searchcard">
                                <!-- SEARCH-BOX -->


                                <div class="card-content black-text">
                                    <textarea class="form-control" id=
                                    "searchbox" ng-model="query" placeholder=
                                    "Search Ingredient"></textarea>
                                    <button class=
                                    "fa fa-search search-ingredient"
                                    fire-enter="" ng-click="searchPlan(query)"
                                    type="submit"></button>
                                </div>
                            </div>
                            <!-- END OF SEARCH-BOX -->
                        </div>
                    </div>
                </div>
                <br>
            </div>
            <div class="row">
                    <div class="col m6 push-m3">
                        <div class="row">
                            <div class="col m4">
                                Search type:
                            </div>


                            <div class="col m4">
                                <input class="filled-in with-gap" id="searchkind1" name=
                                "searchkind" ng-model="searchType" type="radio"
                                value="ingredients"> <label for=
                                "searchkind1">Ingredients</label>
                            </div>


                            <div class="col m4">
                                <input class="filled-in with-gap" id="searchkind2" name=
                                "searchkind" ng-model="searchType" type="radio"
                                value="recipes"> <label for=
                                "searchkind2">Recipes</label>
                            </div>
                        </div>
                    </div>
                </div>


            <div class="row">
                <div class="col m6 create-modal-half1">
                    <div class="searchresult-create row">
                        <div ng-repeat=
                        "detail in details.results track by $index">
                            <p><input checklist-model="checklistIngs"
                            checklist-value="detail" class="filled-in" id=
                            "filled-in-box{{$index}}" ng-disabled=
                            "checkToDisable(detail.id)" type="checkbox">
                            <label class="ing-text highlight" for=
                            "filled-in-box{{$index}}" id=
                            "check-label">{{detail.name}}</label></p>
                        </div>
                    </div>


                    <div class="row smallpaginate">
                    <paging ng-if="details !== undefined && details !== []"
                                class="small"
                                page="currentPage" 
                                page-size="6" 
                                total="pageSize"
                                hide-if-empty="{{hideIfEmpty}}"
                                ul-class="{{ulClass}}"
                                li-class="lipageclass"
                                active-class="{{activeClass}}"
                                disabled-class="{{disabledClass}}"
                                show-prev-next="true"
                                text-next-class="acti fa fa-chevron-right"
                                text-prev-class="acti fa fa-chevron-left"
                                text-first-class="acti fa fa-backward"
                                text-last-class="acti fa fa-forward"
                                text-title-page="Page {page}"
                                text-title-first="First Page"
                                text-title-last="Last Page"
                                text-title-next="Next Page"
                                text-title-prev="Previous" 
                                paging-action="searchPlan(query, page)">
                            </paging> 
                    </div>
                </div>


                <div class="col m6">
                    <div class="nutsection">
                        <div class="row hline" ng-if=
                        "checklistIngs[checklistIngs.length-1]">
                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a ahead servehead">Serving per 100
                                grams:</p>
                            </div>
                        </div>


                        <div class="row hline" ng-if=
                        "checklistIngs[checklistIngs.length-1]">
                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b ahead">Calories (kcal)</p>
                            </div>


                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b">
                                {{checklistIngs[checklistIngs.length-1].energy_kcal}}</p>
                            </div>
                        </div>


                        <div class="row hline" ng-if=
                        "checklistIngs[checklistIngs.length-1]">
                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b ahead">Proteins</p>
                            </div>


                            <div class="col m6">
                                <p class="a b" ng-if=
                                "checklistIngs[checklistIngs.length-1]">
                                {{checklistIngs[checklistIngs.length-1].protein_tot}}</p>
                            </div>
                        </div>


                        <div class="row hline" ng-if=
                        "checklistIngs[checklistIngs.length-1]">
                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b ahead">Fats</p>
                            </div>


                            <div class="col m5" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b">
                                {{checklistIngs[checklistIngs.length-1].fat_tot}}</p>
                            </div>
                        </div>


                        <div class="row hline" ng-if=
                        "checklistIngs[checklistIngs.length-1]">
                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b ahead">Carbohydrates</p>
                            </div>


                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b">
                                {{checklistIngs[checklistIngs.length-1].carbohydrate_tot}}</p>
                            </div>
                        </div>


                        <div class="row hline" ng-if=
                        "checklistIngs[checklistIngs.length-1]">
                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b ahead">Fiber</p>
                            </div>


                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b">
                                {{checklistIngs[checklistIngs.length-1].fiber_tot}}</p>
                            </div>
                        </div>


                        <div class="row hline" ng-if=
                        "checklistIngs[checklistIngs.length-1]">
                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b ahead">Water</p>
                            </div>


                            <div class="col m6" ng-if=
                            "checklistIngs[checklistIngs.length-1]">
                                <p class="a b">
                                {{checklistIngs[checklistIngs.length-1].water}}</p>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>


                    <div class="row" ng-repeat="item in ingredientInModal">
                        <div class="col m10 meal-list">
                            <p class="ing-text meal-list" ng-if=
                            "ingredientInModal.length&gt;0">{{item.name}}</p>
                        </div>


                        <div class="col m2 meal-list">
                            <a href="#" ng-click=
                            "removeIngredient(item)"><i class=
                            "material-icons meal-list right createbin dustbin" ng-if=
                            "ingredientInModal.length&gt;0">delete</i></a>
                        </div>
                    </div>


                    <div class="row" ng-repeat="item in checklistIngs">
                        <div class="col m10 meal-list">
                            <p class="ing-text meal-list" ng-if=
                            "checklistIngs.length&gt;0">{{item.name}}</p>
                        </div>


                        <div class="col m2 meal-list">
                            <a href="#" ng-click=
                            "removeIngredient(item)"><i class=
                            "material-icons meal-list right createbin dustbin" ng-if=
                            "checklistIngs.length&gt;0">delete</i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col m12 center">
                <a class="waves-effect waves-light btn btn-social largebtn"
                ng-click="addContents()">Add</a>
            </div>
        </div>
    </div>
</section>